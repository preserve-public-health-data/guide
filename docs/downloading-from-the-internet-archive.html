<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>5 Downloading from the Internet Archive | Preserving Public Health Data</title>
  <meta name="description" content="5 Downloading from the Internet Archive | Preserving Public Health Data" />
  <meta name="generator" content="bookdown 0.42 and GitBook 2.6.7" />

  <meta property="og:title" content="5 Downloading from the Internet Archive | Preserving Public Health Data" />
  <meta property="og:type" content="book" />
  
  
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="5 Downloading from the Internet Archive | Preserving Public Health Data" />
  
  
  



<meta name="date" content="2025-01-30" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="locating-data-on-live-websites.html"/>
<link rel="next" href="storage-and-dissemination.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> About</a></li>
<li class="chapter" data-level="2" data-path="getting-started.html"><a href="getting-started.html"><i class="fa fa-check"></i><b>2</b> Getting started</a>
<ul>
<li class="chapter" data-level="2.1" data-path="getting-started.html"><a href="getting-started.html#where-we-are-now"><i class="fa fa-check"></i><b>2.1</b> Where we are now</a></li>
<li class="chapter" data-level="2.2" data-path="getting-started.html"><a href="getting-started.html#what-we-can-do-about-it"><i class="fa fa-check"></i><b>2.2</b> What we can do about it</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="tools-for-downloading-data.html"><a href="tools-for-downloading-data.html"><i class="fa fa-check"></i><b>3</b> Tools for downloading data</a>
<ul>
<li class="chapter" data-level="3.1" data-path="tools-for-downloading-data.html"><a href="tools-for-downloading-data.html#command-line-utilities"><i class="fa fa-check"></i><b>3.1</b> Command-line utilities</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="tools-for-downloading-data.html"><a href="tools-for-downloading-data.html#installing-and-using-unix-shells"><i class="fa fa-check"></i><b>3.1.1</b> Installing and using Unix shells</a></li>
<li class="chapter" data-level="3.1.2" data-path="tools-for-downloading-data.html"><a href="tools-for-downloading-data.html#wget-wget2"><i class="fa fa-check"></i><b>3.1.2</b> wget / wget2</a></li>
<li class="chapter" data-level="3.1.3" data-path="tools-for-downloading-data.html"><a href="tools-for-downloading-data.html#curl"><i class="fa fa-check"></i><b>3.1.3</b> curl</a></li>
<li class="chapter" data-level="3.1.4" data-path="tools-for-downloading-data.html"><a href="tools-for-downloading-data.html#aria2"><i class="fa fa-check"></i><b>3.1.4</b> aria2</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="tools-for-downloading-data.html"><a href="tools-for-downloading-data.html#r"><i class="fa fa-check"></i><b>3.2</b> R</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="tools-for-downloading-data.html"><a href="tools-for-downloading-data.html#httr-httr2"><i class="fa fa-check"></i><b>3.2.1</b> httr / [httr2]</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="tools-for-downloading-data.html"><a href="tools-for-downloading-data.html#python"><i class="fa fa-check"></i><b>3.3</b> Python</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="locating-data-on-live-websites.html"><a href="locating-data-on-live-websites.html"><i class="fa fa-check"></i><b>4</b> Locating data on live websites</a>
<ul>
<li class="chapter" data-level="4.1" data-path="locating-data-on-live-websites.html"><a href="locating-data-on-live-websites.html#file-path-reverse-engineering"><i class="fa fa-check"></i><b>4.1</b> File path reverse engineering</a></li>
<li class="chapter" data-level="4.2" data-path="locating-data-on-live-websites.html"><a href="locating-data-on-live-websites.html#inspecting-network-requests"><i class="fa fa-check"></i><b>4.2</b> Inspecting network requests</a></li>
<li class="chapter" data-level="4.3" data-path="locating-data-on-live-websites.html"><a href="locating-data-on-live-websites.html#using-apis"><i class="fa fa-check"></i><b>4.3</b> Using APIs</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="downloading-from-the-internet-archive.html"><a href="downloading-from-the-internet-archive.html"><i class="fa fa-check"></i><b>5</b> Downloading from the Internet Archive</a>
<ul>
<li class="chapter" data-level="5.1" data-path="downloading-from-the-internet-archive.html"><a href="downloading-from-the-internet-archive.html#using-the-wayback-machine-web-interface"><i class="fa fa-check"></i><b>5.1</b> Using the Wayback Machine web interface</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="downloading-from-the-internet-archive.html"><a href="downloading-from-the-internet-archive.html#the-search-bar"><i class="fa fa-check"></i><b>5.1.1</b> The search bar</a></li>
<li class="chapter" data-level="5.1.2" data-path="downloading-from-the-internet-archive.html"><a href="downloading-from-the-internet-archive.html#the-calendar-tab"><i class="fa fa-check"></i><b>5.1.2</b> The Calendar tab</a></li>
<li class="chapter" data-level="5.1.3" data-path="downloading-from-the-internet-archive.html"><a href="downloading-from-the-internet-archive.html#capture-pages"><i class="fa fa-check"></i><b>5.1.3</b> Capture pages</a></li>
<li class="chapter" data-level="5.1.4" data-path="downloading-from-the-internet-archive.html"><a href="downloading-from-the-internet-archive.html#the-site-map-tab"><i class="fa fa-check"></i><b>5.1.4</b> The Site Map tab</a></li>
<li class="chapter" data-level="5.1.5" data-path="downloading-from-the-internet-archive.html"><a href="downloading-from-the-internet-archive.html#the-urls-tab"><i class="fa fa-check"></i><b>5.1.5</b> The URLs tab</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="downloading-from-the-internet-archive.html"><a href="downloading-from-the-internet-archive.html#using-download-scripts"><i class="fa fa-check"></i><b>5.2</b> Using download scripts</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="downloading-from-the-internet-archive.html"><a href="downloading-from-the-internet-archive.html#querying-pages"><i class="fa fa-check"></i><b>5.2.1</b> Querying pages</a></li>
<li class="chapter" data-level="5.2.2" data-path="downloading-from-the-internet-archive.html"><a href="downloading-from-the-internet-archive.html#downloading-pages"><i class="fa fa-check"></i><b>5.2.2</b> Downloading pages</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="downloading-from-the-internet-archive.html"><a href="downloading-from-the-internet-archive.html#using-the-cdx-api"><i class="fa fa-check"></i><b>5.3</b> Using the CDX API</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="downloading-from-the-internet-archive.html"><a href="downloading-from-the-internet-archive.html#querying-the-cdx-api"><i class="fa fa-check"></i><b>5.3.1</b> Querying the CDX API</a></li>
<li class="chapter" data-level="5.3.2" data-path="downloading-from-the-internet-archive.html"><a href="downloading-from-the-internet-archive.html#reconstructing-the-wayback-machine-url-from-cdx-api-output"><i class="fa fa-check"></i><b>5.3.2</b> Reconstructing the Wayback Machine URL from CDX API output</a></li>
<li class="chapter" data-level="5.3.3" data-path="downloading-from-the-internet-archive.html"><a href="downloading-from-the-internet-archive.html#examples"><i class="fa fa-check"></i><b>5.3.3</b> Examples</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="downloading-from-the-internet-archive.html"><a href="downloading-from-the-internet-archive.html#common-pitfalls"><i class="fa fa-check"></i><b>5.4</b> Common pitfalls</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="downloading-from-the-internet-archive.html"><a href="downloading-from-the-internet-archive.html#non-nested-websites-and-externally-linked-resources"><i class="fa fa-check"></i><b>5.4.1</b> Non-nested websites and externally-linked resources</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="downloading-from-the-internet-archive.html"><a href="downloading-from-the-internet-archive.html#worked-examples"><i class="fa fa-check"></i><b>5.5</b> Worked examples</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="storage-and-dissemination.html"><a href="storage-and-dissemination.html"><i class="fa fa-check"></i><b>6</b> Storage and dissemination</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Preserving Public Health Data</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="downloading-from-the-internet-archive" class="section level1 hasAnchor" number="5">
<h1><span class="header-section-number">5</span> Downloading from the Internet Archive<a href="downloading-from-the-internet-archive.html#downloading-from-the-internet-archive" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="using-the-wayback-machine-web-interface" class="section level2 hasAnchor" number="5.1">
<h2><span class="header-section-number">5.1</span> Using the Wayback Machine web interface<a href="downloading-from-the-internet-archive.html#using-the-wayback-machine-web-interface" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The Wayback Machine web interface can be accessed by navigating to <a href="https://archive.org" class="uri">https://archive.org</a>. More comprehensive information about the Wayback Machine is available on the <a href="https://help.archive.org/help/category/the-wayback-machine/">Internet Archive website</a>.</p>
<div id="the-search-bar" class="section level3 hasAnchor" number="5.1.1">
<h3><span class="header-section-number">5.1.1</span> The search bar<a href="downloading-from-the-internet-archive.html#the-search-bar" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To search for content, use enter text into this search bar and press “Enter”:</p>
<p><img src="images/4-search-bar.png" /></p>
<p>The text can either be:</p>
<ol style="list-style-type: decimal">
<li>A complete URL pointing to a page that you want to view captures of, or</li>
<li>A url prefix, i.e. the beginning of the URL up to the point that you typed. The prefix itself must be a valid path on its own (i.e. end with a <code>/</code>).</li>
</ol>
<p>After submitting your query, you will be presented with a page similar to the one shown below.</p>
<p><img src="images/4-results-page.png" /></p>
<p>The most relevant parts of this page are the different tab links (starting with “Calendar”), the capture graph, and the capture calendar.</p>
</div>
<div id="the-calendar-tab" class="section level3 hasAnchor" number="5.1.2">
<h3><span class="header-section-number">5.1.2</span> The Calendar tab<a href="downloading-from-the-internet-archive.html#the-calendar-tab" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>By default, if you entered the URL of a page, you will be presented with the Calendar tab which will show the year of the most recent capture. Use the graph at the top to change the year. The graph is a histogram showing the relative frequency of captures per month.</p>
<p>To view a capture, mouse over one of the days bubbled in green or blue. A window will pop up listing the times of captures made on that day:</p>
<p><img src="images/4-calendar-selector.png" /></p>
<p>Clicking on one of these will bring you to that capture.</p>
</div>
<div id="capture-pages" class="section level3 hasAnchor" number="5.1.3">
<h3><span class="header-section-number">5.1.3</span> Capture pages<a href="downloading-from-the-internet-archive.html#capture-pages" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Capture pages will show how the page looked at the time of the capture. You can navigate these pages as you would a normal webpage and links will be substituted with Wayback Machine captures where possible.</p>
<p>In addition, the Internet Archive adds a toolbar at the top of each page to aid in navigation:</p>
<p><img src="images/4-capture-page.png" /></p>
<p>You can navigate through different captures by:</p>
<ol style="list-style-type: decimal">
<li>Clicking the link at the top left listing the number of captures, which will take you back to the calendar page;</li>
<li>Clicking on one of the months in the graph, which will take you to the first capture in that month; or</li>
<li>Using the left and right blue arrows (if any) at the top right, which will take you to the closest capture either before or after the one currently being viewed.</li>
</ol>
</div>
<div id="the-site-map-tab" class="section level3 hasAnchor" number="5.1.4">
<h3><span class="header-section-number">5.1.4</span> The Site Map tab<a href="downloading-from-the-internet-archive.html#the-site-map-tab" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>From the main results page, you can click on “Site Map” to view the site map graph, which illustrates the different paths that branch from the current search query:</p>
<p><img src="images/4-site-map.png" /></p>
<p>You can click on any part of this graph to be brought to the most recent capture of that page.</p>
</div>
<div id="the-urls-tab" class="section level3 hasAnchor" number="5.1.5">
<h3><span class="header-section-number">5.1.5</span> The URLs tab<a href="downloading-from-the-internet-archive.html#the-urls-tab" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The URLs tab shows all captured URLs that are nested within the current search query:</p>
<p><img src="images/4-urls.png" /></p>
<p>These results can be browsed and filtered using the pagination links at the bottom right of the page or the filter input box at the top right. Most importantly, results can be filtered by <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/MIME_types/Common_types">MIME type</a>, which allow you to locate files of specific file formats.</p>
<p>Some examples of common MIME types:</p>
<ul>
<li>PDF files: <code>application/pdf</code></li>
<li>ZIP archives: <code>application/zip</code> or <code>application/x-zip-compressed</code></li>
<li>CSV files: <code>text/csv</code></li>
</ul>
<p>Partial matches are also supported. For example:</p>
<ul>
<li><code>image/</code> can be used to match any image file.</li>
<li><code>video/</code> can be used to match any video file.</li>
</ul>
</div>
</div>
<div id="using-download-scripts" class="section level2 hasAnchor" number="5.2">
<h2><span class="header-section-number">5.2</span> Using download scripts<a href="downloading-from-the-internet-archive.html#using-download-scripts" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="querying-pages" class="section level3 hasAnchor" number="5.2.1">
<h3><span class="header-section-number">5.2.1</span> Querying pages<a href="downloading-from-the-internet-archive.html#querying-pages" class="anchor-section" aria-label="Anchor link to header"></a></h3>
</div>
<div id="downloading-pages" class="section level3 hasAnchor" number="5.2.2">
<h3><span class="header-section-number">5.2.2</span> Downloading pages<a href="downloading-from-the-internet-archive.html#downloading-pages" class="anchor-section" aria-label="Anchor link to header"></a></h3>
</div>
</div>
<div id="using-the-cdx-api" class="section level2 hasAnchor" number="5.3">
<h2><span class="header-section-number">5.3</span> Using the CDX API<a href="downloading-from-the-internet-archive.html#using-the-cdx-api" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The Wayback Machine CDX API allows access to the indices that the Wayback Machine uses internally to keep track of and query archived URLs. If, for whatever reason, none of the above methods are available (for example on a headless server without the ability to install software), the CDX API can be used in conjunction with commonly-found command-line utilities to locate files for download. The CDX API is also useful for writing custom download scripts and programs or for exploring archived URLs.</p>
<p>This guide will not comprehensively document the CDX API itself as the Internet Archive already maintains <a href="https://archive.org/developers/wayback-cdx-server.html">extensive documentation</a> on their website.</p>
<div id="querying-the-cdx-api" class="section level3 hasAnchor" number="5.3.1">
<h3><span class="header-section-number">5.3.1</span> Querying the CDX API<a href="downloading-from-the-internet-archive.html#querying-the-cdx-api" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The CDX API endpoint lives at <a href="http://web.archive.org/cdx/search/cdx" class="uri">http://web.archive.org/cdx/search/cdx</a>. The main parameters of interest are:</p>
<ul>
<li><code>url</code> (string): The primary filter. Must be <a href="https://en.wikipedia.org/wiki/Percent-encoding">precent-encoded</a>.</li>
<li><code>matchType</code> (string): Describes how <code>url</code> is matched. The following values will be the most useful:
<ul>
<li><code>exact</code>: Results must match <code>url</code> exactly (default if <code>matchType</code> is not provided);</li>
<li><code>prefix</code>: Results must begin with <code>url</code>.</li>
</ul></li>
</ul>
<p>Other useful parameters:</p>
<ul>
<li><code>from</code> and <code>to</code> (integer): Filters the results by date range. Must be given in the form <code>YYYYMMDDhhmmss</code>; partial information is allowed (for example <code>YYYY</code> or <code>YYYYMMDD</code>).</li>
<li><code>limit</code> (integer): Limits the number of results returned. The CDX API docs note that <em>“the CDX server may return millions or billions of record[s]”</em>, so this may be necessary for larger or older sites.</li>
<li><code>fl</code> (one or more strings, comma-separated): Chooses which fields are returned, and in what order. The most useful fields are:
<ul>
<li><code>timestamp</code>: The timestamp of the capture, formatted as <code>YYYMMDDhhmmss</code>.</li>
<li><code>original</code>: The original URL. Not ideal for filtering due to things like port specification; see <code>urlkey</code> instead.</li>
<li><code>mimetype</code>: The <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/MIME_types/Common_types">MIME type</a> string.</li>
<li><code>urlkey</code> and <code>"digest"</code>: The standardized URL and a checksum of the content, respectively. Useful for filtering out all duplicated URLs (<code>urlkey</code>) or only duplicated URLs with the same content (<code>digest</code>).</li>
</ul></li>
<li><code>collapse</code> (string): Filters out results by the given field, returning only the first when ordered by date. See above for fields that can be passed to <code>collapse</code>.</li>
<li><code>filter</code> (string formatted like <code>[!]field:regex</code>): Use <a href="https://en.wikipedia.org/wiki/Regular_expression">regular expressions</a> to filter based on field values.</li>
</ul>
<p>Most common requests will take the form of <code>http://web.archive.org/cdx/search/cdx?url=[URL]&amp;matchType=prefix</code>, which will return all URLs beginning with <code>[URL]</code>. Outputs are sorted by URL and date.</p>
</div>
<div id="reconstructing-the-wayback-machine-url-from-cdx-api-output" class="section level3 hasAnchor" number="5.3.2">
<h3><span class="header-section-number">5.3.2</span> Reconstructing the Wayback Machine URL from CDX API output<a href="downloading-from-the-internet-archive.html#reconstructing-the-wayback-machine-url-from-cdx-api-output" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Using only the <code>timestamp</code> and <code>original</code> fields, we can reconstruct archived URLs of the results returned by the CDX API as using the following template:</p>
<p><code>https://web.archive.org/web/[TIMESTAMP]/[ORIGINAL]</code></p>
<p>where <code>[TIMESTAMP]</code> and <code>[ORIGINAL]</code> are the <code>timestamp</code> and <code>original</code> fields, respectively.</p>
</div>
<div id="examples" class="section level3 hasAnchor" number="5.3.3">
<h3><span class="header-section-number">5.3.3</span> Examples<a href="downloading-from-the-internet-archive.html#examples" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Note: <code>&amp;limit=5</code> has been appended to all example request URLs.</p>
<p><strong>Return all URLs beginning with <code>nih.gov</code></strong></p>
<p>Request: <a href="http://web.archive.org/cdx/search/cdx?url=nih.gov&amp;matchType=host" class="uri">http://web.archive.org/cdx/search/cdx?url=nih.gov&amp;matchType=host</a></p>
<p>Response:</p>
<pre><code>gov,nih)/ 19971210191959 http://www.nih.gov:80/ text/html 200 VQYSXO37KW53LD7HTFOTW5PN5VF74CSM 1977
gov,nih)/ 19971210191959 http://www.nih.gov:80/ text/html 200 VQYSXO37KW53LD7HTFOTW5PN5VF74CSM 1977
gov,nih)/ 19971210191959 http://www.nih.gov:80/ text/html 200 VQYSXO37KW53LD7HTFOTW5PN5VF74CSM 1977
gov,nih)/ 19980204234008 http://www.nih.gov:80/ text/html 200 343MBBETTNE43WB6TJSCIIGQSPVRG6AY 1992
gov,nih)/ 19981212031409 http://www.nih.gov:80/ text/html 200 WA4UOXZMXJYHIIYABQCZB7MXJBURXNR6 2635</code></pre>
<p><strong>Return all URLs beginning with <code>nih.gov</code> <em>with unique content</em></strong></p>
<p>Request: <a href="http://web.archive.org/cdx/search/cdx?url=nih.gov&amp;matchType=host&amp;collapse=digest" class="uri">http://web.archive.org/cdx/search/cdx?url=nih.gov&amp;matchType=host&amp;collapse=digest</a></p>
<p>Response:</p>
<pre><code>gov,nih)/ 19971210191959 http://www.nih.gov:80/ text/html 200 VQYSXO37KW53LD7HTFOTW5PN5VF74CSM 1977
gov,nih)/ 19980204234008 http://www.nih.gov:80/ text/html 200 343MBBETTNE43WB6TJSCIIGQSPVRG6AY 1992
gov,nih)/ 19981212031409 http://www.nih.gov:80/ text/html 200 WA4UOXZMXJYHIIYABQCZB7MXJBURXNR6 2635
gov,nih)/ 19990117023817 http://nih.gov:80/ text/html 200 4LFPLNNQ67M6LJT3LZBBNT3RNZKUJLXS 2604
gov,nih)/ 19990125091117 http://nih.gov:80/ text/html 200 VY6HRTZDJND4JKWNMAVH43OBEV5HKR5B 2744</code></pre>
<p>Note that 3 records with duplicate content have been dropped between the previous request and this one.</p>
<p><strong>Return all <em>unique URLs</em> beginning with <code>nih.gov</code></strong></p>
<p>Request: <a href="http://web.archive.org/cdx/search/cdx?url=nih.gov&amp;matchType=host&amp;collapse=urlkey&amp;limit=5" class="uri">http://web.archive.org/cdx/search/cdx?url=nih.gov&amp;matchType=host&amp;collapse=urlkey&amp;limit=5</a></p>
<p>Response:</p>
<pre><code>gov,nih)/ 19971210191959 http://www.nih.gov:80/ text/html 200 VQYSXO37KW53LD7HTFOTW5PN5VF74CSM 1977
gov,nih)/!%0d%0a%20medlinep 20210505215349 http://nih.gov/!%0D%0A%20medlinep text/html 301 PAJQC5WJFC6FWJIM7WZA7WU2SW5AU43R 440
gov,nih)/!clearcommunication/plainlanguage/index.htm 20240816204904 https://www.nih.gov/!clearcommunication/plainlanguage/index.htm text/html 404 WLBW2ZNS7QAI6LLO3D6CLUYLU5SKQEXJ 8042
gov,nih)/!clearcommunication/plainlanguage/index.htm!figure 20240816203157 http://www.nih.gov/!clearcommunication/plainlanguage/index.htm!Figure unk 301 3I42H3S6NNFQ2MSVX7XZKYAYSCX5QBYJ 259
gov,nih)/&quot; 20000201081541 http://www.nih.gov:80/%22 text/html 404 UDSH36NBYWO2X73LNMX2LEHLNQ7FYXHZ 326</code></pre>
<p>Note that this query will only return the first capture in each collapse group. To get the most recent capture for each group, it would be better to collapse by <code>digest</code> instead and then process the output.</p>
<p><strong>Return all unique <em>PDF files</em> (MIME type: <code>application/pdf</code>) beginning with <code>nih.gov</code></strong></p>
<p>Request: <a href="http://web.archive.org/cdx/search/cdx?url=nih.gov&amp;matchType=host&amp;collapse=urlkey&amp;filter=mimetype:application/pdf" class="uri">http://web.archive.org/cdx/search/cdx?url=nih.gov&amp;matchType=host&amp;collapse=urlkey&amp;filter=mimetype:application/pdf</a></p>
<p>Response:</p>
<pre><code>gov,nih)/about/97_almanac/almanac97.pdf 20041031172700 http://www.nih.gov/about/97_Almanac/almanac97.pdf application/pdf 200 B6XAXDQ5YA2BD2FC7CWH6HLG7YAGRQT5 1412860
gov,nih)/about/almanac/2001/appropriations/appropriations2001.pdf 20041107184849 http://www.nih.gov/about/almanac/2001/appropriations/appropriations2001.pdf application/pdf 200 YQNM4XRHFNFUC3RPAERP7T6F7OWS6TDQ 49644
gov,nih)/about/almanac/almanac_2006_2007.pdf 20070824135850 http://www.nih.gov/about/almanac/Almanac_2006_2007.pdf application/pdf 200 Q33VZSPQ7EUOVJ7PLGGFGLYRS4466FGV 2005821
gov,nih)/about/almanac/almanac_2008_2009.pdf 20081029135142 http://www.nih.gov/about/almanac/Almanac_2008_2009.pdf application/pdf 200 CNYNO3S7OWTPSYCJKIT2LCJTMDKZJ3WI 2610665
gov,nih)/about/almanac/archive/2001/appropriations/appropriations2001.pdf 20080924150457 http://www.nih.gov/about/almanac/archive/2001/appropriations/appropriations2001.pdf application/pdf 200 YQNM4XRHFNFUC3RPAERP7T6F7OWS6TDQ 49675</code></pre>
<p><strong>The same as the previous example, but <em>dump the URLs only</em></strong> (for example to feed into a download tool)</p>
<p>Request: <a href="http://web.archive.org/cdx/search/cdx?url=dpcpsi.nih.gov&amp;matchType=host&amp;collapse=digest&amp;filter=mimetype:application/pdf&amp;fl=original" class="uri">http://web.archive.org/cdx/search/cdx?url=dpcpsi.nih.gov&amp;matchType=host&amp;collapse=digest&amp;filter=mimetype:application/pdf&amp;fl=original</a></p>
<p>Response:</p>
<pre><code>http://dpcpsi.nih.gov/collaboration/2007_Report_of_Trans-NIH_Research.pdf
http://dpcpsi.nih.gov/collaboration/2008_Report_of_Trans-NIH_Research.pdf
http://dpcpsi.nih.gov/collaboration/2009_Report_of_Trans-NIH_Research.pdf
http://dpcpsi.nih.gov/collaboration/Trans-NIH_Research.pdf
http://dpcpsi.nih.gov/council/110807minutes.pdf</code></pre>
<p>Note that the above URLs cannot be passed to raw downloaders like <code>wget</code>, <code>aria2</code>, etc. directly if the content is no longer live and are only usable by downloaders like <code>wayback_machine_downloader</code> and <code>waybackpack</code> that are specific to the Internet Archive. See below for an example of how to reconstruct <code>archive.org</code> URLs that can be passed to those tools.</p>
<p><strong>The same as the previous example, but reconstruct the <code>archive.org</code> URLs using Bash</strong> (for example to feed into a download tool)</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="downloading-from-the-internet-archive.html#cb6-1" tabindex="-1"></a><span class="ex">curl</span> <span class="st">&quot;http://web.archive.org/cdx/search/cdx?url=dpcpsi.nih.gov&amp;matchType=host&amp;collapse=digest&amp;filter=mimetype:application/pdf&amp;fl=original&quot;</span> <span class="kw">|</span></span>
<span id="cb6-2"><a href="downloading-from-the-internet-archive.html#cb6-2" tabindex="-1"></a>    <span class="cf">while</span> <span class="va">IFS</span><span class="op">=</span><span class="st">&quot; &quot;</span> <span class="bu">read</span> <span class="va">urlkey</span> <span class="va">timestamp</span> <span class="va">original</span> <span class="va">mimetype</span> <span class="va">statuscode</span> <span class="va">digest</span> <span class="va">length</span></span>
<span id="cb6-3"><a href="downloading-from-the-internet-archive.html#cb6-3" tabindex="-1"></a>    <span class="cf">do</span></span>
<span id="cb6-4"><a href="downloading-from-the-internet-archive.html#cb6-4" tabindex="-1"></a>        <span class="bu">echo</span> <span class="st">&quot;https://web.archive.org/web/</span><span class="va">${timestamp}</span><span class="st">/</span><span class="va">${original}</span><span class="st">&quot;</span></span>
<span id="cb6-5"><a href="downloading-from-the-internet-archive.html#cb6-5" tabindex="-1"></a>    <span class="cf">done</span> <span class="co"># From here, redirect to a file or pipe to a download tool</span></span></code></pre></div>
</div>
</div>
<div id="common-pitfalls" class="section level2 hasAnchor" number="5.4">
<h2><span class="header-section-number">5.4</span> Common pitfalls<a href="downloading-from-the-internet-archive.html#common-pitfalls" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="non-nested-websites-and-externally-linked-resources" class="section level3 hasAnchor" number="5.4.1">
<h3><span class="header-section-number">5.4.1</span> Non-nested websites and externally-linked resources<a href="downloading-from-the-internet-archive.html#non-nested-websites-and-externally-linked-resources" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Many of the common download tools and interfaces for interacting with the Internet Archive (including the CDX API) do not play well with sites whose content is not strictly nested. By this, we mean sites that utilise webpages that pull resources from:</p>
<ul>
<li>Other paths / domains of the same site, or</li>
<li>Other sites entirely, such as content delivery networks.</li>
</ul>
<p>For example, the homepage of the NIH Sexual &amp; Gender Minority Research office, which used to live at <a href="https://dpcpsi.nih.gov/sgmro" class="uri">https://dpcpsi.nih.gov/sgmro</a>, linked resources from:</p>
<ul>
<li><a href="https://dpcpsi.nih.gov/sites" class="uri">https://dpcpsi.nih.gov/sites</a> (embedded images),</li>
<li><a href="https://dpcpsi.nih.gov/themes" class="uri">https://dpcpsi.nih.gov/themes</a> (stylesheets), and</li>
<li><a href="https://dpcpsi.nih.gov/core" class="uri">https://dpcpsi.nih.gov/core</a> (scripts),</li>
</ul>
<p>all of which are located on different directory trees and so would not show up in queries of <code>dpcpsi.nih.gov/sgmro</code>.</p>
<p>This issue is more prevalent on sites that make use of content management systems like Drupal or WordPress and sites that use website building and hosting services such as those offered by Wix.com and Squarespace.</p>
<p>The most straightforward way to work around this issue is to:</p>
<ol style="list-style-type: decimal">
<li>Query all HTML files from the site of interest, which should hopefully be nested;</li>
<li>Download all of the returned URLs; and</li>
<li>Parse the the downloaded HTML files to identify tags of interest and the URLs that they link to.</li>
</ol>
<p>For example, the following <code>bash</code> + <code>htmlq</code> code will dump the URLs of images referenced by HTML files in the current directory:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb7-1"><a href="downloading-from-the-internet-archive.html#cb7-1" tabindex="-1"></a><span class="fu">find</span> . <span class="at">-name</span> <span class="st">&#39;*.htm*&#39;</span> <span class="at">-print0</span> <span class="kw">|</span></span>
<span id="cb7-2"><a href="downloading-from-the-internet-archive.html#cb7-2" tabindex="-1"></a>    <span class="fu">xargs</span> <span class="at">-0</span> cat <span class="kw">|</span></span>
<span id="cb7-3"><a href="downloading-from-the-internet-archive.html#cb7-3" tabindex="-1"></a>    <span class="ex">htmlq</span> img <span class="at">-a</span> src</span></code></pre></div>
</div>
</div>
<div id="worked-examples" class="section level2 hasAnchor" number="5.5">
<h2><span class="header-section-number">5.5</span> Worked examples<a href="downloading-from-the-internet-archive.html#worked-examples" class="anchor-section" aria-label="Anchor link to header"></a></h2>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="locating-data-on-live-websites.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="storage-and-dissemination.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsubsection"
}
});
});
</script>

</body>

</html>
